<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>智能车监管大数据平台</title>
    <!--设置是否为缩放模式 -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" type="text/css" href="bootstrap/3.3.4/css/bootstrap.css">
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <!-- <script src="js/jquery.min.js"></script> -->
    <!-- <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script> -->
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="js/bootstrap.min.js"></script>

    <!-- 弹出式窗口 -->
    <link rel="stylesheet" type="text/css" href="css/default.css" />
    <link rel="stylesheet" type="text/css" href="css/component.css" />
    <script src="js/modernizr.custom.js"></script>

    <!-- 服务器配置 -->
    <script src="js/server.js"></script>

    <!--echarts JS-->
    <!-- <script src="js/echarts.min.js"></script> -->
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.0.2/echarts.js"></script>

    <!-- 轮播swiper文件 -->
    <link rel="stylesheet" type="text/css" href="css/swiper.min.css">
    <script src="js/swiper.min.js"></script>

    <!--界面样式-->
    <script src="js/visual.js"></script>
    <script src="js/china.js"></script>
    <!-- <script src="js/xiamen.js"></script> -->
    <script src="js/chartMap.js"></script>
    <link rel="stylesheet" type="text/css" href="css/visual.css">

    <!-- semantic UI -->
    <link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/icon.css" rel="stylesheet">
    <!-- <link href="https://cdn.bootcss.com/semantic-ui/2.4.1/components/icon.css" rel="stylesheet"> -->
    <link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/button.css" rel="stylesheet">
    <script src="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/transition.js"></script>
    <link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/transition.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/button.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/semantic-ui/2.4.1/components/icon.css" rel="stylesheet">
    <script src="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/dropdown.js"></script>
    <link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/dropdown.css" rel="stylesheet">


    <!-- semantic的下拉菜单不能反色，用formantic -->
    <!-- <script src="https://cdn.bootcdn.net/ajax/libs/fomantic-ui/2.8.7/components/dropdown.js"></script>
    <link href="https://cdn.bootcdn.net/ajax/libs/fomantic-ui/2.8.7/components/dropdown.css" rel="stylesheet"> -->


    <!-- 百度地图 -->
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=NjvQlGFSxuq5B7ld8vdIWwuGfdy2sTsq"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=1.0&type=webgl&ak=NjvQlGFSxuq5B7ld8vdIWwuGfdy2sTsq"></script>
        <!-- 百度地图绘图需要的css，存在跨域问题，所以手动复制下来作为静态资源提供 -->
    <link rel="stylesheet" type="text/css" href="css/bmap.css">

    <!-- 容器反转 -->
    <link rel="stylesheet" type="text/css" href="css/flip.css">
    <script src="js/flip.js"></script>

    <!-- echarts 绘图脚本 -->
    <script src="js/charts.js"></script>

    <!-- 数据请求脚本 -->
    <script src="js/dashboard.js"></script>
    <script src="js/scoreboard.js"></script>

    <!-- 时钟 -->
    <!-- <link rel="stylesheet" href="css/clock.css"> -->

    <!-- 坐标转换 -->
    <script src="js/coordtransform.js"></script>

    <!-- 其他css -->
    <link rel="stylesheet" type="text/css" href="css/mine.css">
    <script src="js/mine.js"></script>

    <!-- 下拉菜单 -->
    <link href="dist/css/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="dist/css/bootstrap-theme.css" rel="stylesheet" type="text/css">
    <link href="dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/tests/vendor/jquery.min.js"></script>
    <script type="text/javascript" src="dist/bootstrap.js"></script>
    <script type="text/javascript" src="dist/bootstrap.min.js"></script>
    <script type="text/javascript" src="dist/npm.js"></script>
    <script type="text/javascript" src="js/tab.js"></script>
    <script type="text/javascript" src="js/dropdown.js"></script>



</head>
<body class="ksh" id='main_body'>
    <div class="head_top"><span>课题三：自动驾驶电动汽车大数据云雾融合平台研究</span></div>
    <div class="visual">
        <div class="visual_left">
            <div class="dropdown">
                <select id="time">
                    <option value="0">时间</option>
                    <option value="1">白天</option>
                    <option value="2">晚上</option>
                </select>
            </div>
    
            <div class="dropdown">
                <select id="weather">
                    <option value="0">天气</option>
                    <option value="1">晴天</option>
                    <option value="2">雨天</option>
                </select>
            </div>
    
            <div class="dropdown">
                <select id="xsclxw">
                    <option value="0">行驶车辆行为</option>
                    <option value="1">右转弯</option>
                    <option value="2">左转弯</option>
                    <option value="3">直行前进</option>
                    <option value="4">变道</option>
                    <option value="5">超车</option>
                    <option value="6">倒车</option>
                </select>
            </div>
    
            <div class="dropdown">
                <select id="wxdxxw">
                    <option value="0">危险对象行为</option>
                    <option value="1">右转弯</option>
                    <option value="2">左转弯</option>
                    <option value="3">急停</option>
                    <option value="4">直行前进</option>
                    <option value="5">变道</option>
                    <option value="6">超车</option>
                    <option value="7">掉头</option>
                    <option value="8">倒车</option>
                </select>
            </div>
    
            <div class="dropdown">
                <select id="wxdxsx">
                    <option value="0">危险对象属性</option>
                    <option value="1">摩托车</option>
                    <option value="2">自行车</option>
                    <option value="3">小型车</option>
                    <option value="4">行人</option>
                </select>
            </div>
    
            <div class="dropdown">
                <select id="lklx">
                    <option value="0">路口类型</option>
                    <option value="1">掉头路口</option>
                    <option value="2">合流路口</option>
                    <option value="3">非路口</option>
                    <option value="4">丁字路口</option>
                    <option value="5">十字路口</option>
                </select>
            </div>
    
            <div class="dropdown">
                <select id="lmzt">
                    <option value="0">路面状态</option>
                    <option value="1">湿滑</option>
                    <option value="2">干燥</option>
                </select>
            </div>
    
            <div class="dropdown">
                <select id="dlbzx">
                    <option value="0">道路标志线</option>
                    <option value="1">无</option>
                    <option value="2">有</option>
                </select>
            </div>
    
            <div class="dropdown">
                <select id="map">
                    <option value="0">地图</option>
                    <option value="1">城镇</option>
                    <option value="2">乡村</option>
                </select>
            </div>
            
            <div>
                <div >
                    <button onclick="sousuo()" class="b1">搜索</button>
                    <button onclick="playPause()" class="b1">播放</button>
                </div>
            </div>
        </div>
        <div class="visual_con">
            <video class="v1" id="video1" >
                <!-- <source src="mp4/0001.mp4" type="video/mp4"> -->
                <source src="mp4/0001.mp4" type="video/mp4">
                 <!-- <source src="mov_bbb.ogg" type="video/ogg"> -->
                </source>
             </video>
        </div>
    </div>    
       

</body>
</html>

<style>
    button.b1{
        background-color:rgba(84, 85, 177, 0.568);
    }

    video.v1{
        width: 800px;
        /* object-fit: none; */
        object-position: 0px 0px;     
    }

    .main_box{
        height:max-content;
        width: max-content;
        position: absolute;
    }

    .main_box.left_box{
        width:25%;height:100%;float:left; position:relative;
    }
    .main_box.right_box{
        width:75%;height:100%;float:left; position:relative;
    }


</style>

<script>


function sousuo()
{
    var myVideo=document.getElementById("video1"); 
    var sources = myVideo.getElementsByTagName('source');

    //time
    var time = document.getElementById("time");
    var time_index = time.selectedIndex;
    console.log(time_index);
    var mytime = time.options[time_index].value;
    console.log(mytime)

    //weather
    var weather = document.getElementById("weather");
    var weather_index = weather.selectedIndex;
    console.log(weather_index);
    var myweather = weather.options[weather_index].value;
    console.log(myweather)

    //xsclxw
    var xsclxw = document.getElementById("xsclxw");
    var xsclxw_index = xsclxw.selectedIndex;
    console.log(xsclxw_index);
    var myxsclxw = xsclxw.options[xsclxw_index].value;
    console.log(myxsclxw)

    //wxdxxw
    var wxdxxw = document.getElementById("wxdxxw");
    var wxdxxw_index = wxdxxw.selectedIndex;
    console.log(wxdxxw_index);
    var mywxdxxw = wxdxxw.options[wxdxxw_index].value;
    console.log(mywxdxxw)

    //wxdxsx
    var wxdxsx = document.getElementById("wxdxsx");
    var wxdxsx_index = wxdxsx.selectedIndex;
    console.log(wxdxsx_index);
    var mywxdxsx = wxdxsx.options[wxdxsx_index].value;
    console.log(mywxdxsx)

    //lklx
    var lklx = document.getElementById("lklx");
    var lklx_index = lklx.selectedIndex;
    console.log(lklx_index);
    var mylklx = lklx.options[lklx_index].value;
    console.log(mylklx)

    //lmzt
    var lmzt = document.getElementById("lmzt");
    var lmzt_index =lmzt.selectedIndex;
    console.log(lmzt_index);
    var mylmzt = lmzt.options[lmzt_index].value;
    console.log(mylmzt)

    //dlbzx
    var dlbzx = document.getElementById("dlbzx");
    var dlbzx_index = dlbzx.selectedIndex;
    console.log(dlbzx_index);
    var mydlbzx = dlbzx.options[dlbzx_index].value;
    console.log(mydlbzx)

    //map
    var map = document.getElementById("map");
    var map_index = map.selectedIndex;
    console.log(map_index);
    var mymap = map.options[map_index].value;
    console.log(mymap)

    var param = {};

    param["time"] = time_index;
    param["weather"] = weather_index;
    param["xsclxw"] = xsclxw_index;
    param["wxdxxw"] = wxdxxw_index;
    param["wxdxsx"] = wxdxsx_index;
    param["lklx"] = lklx_index;
    param["lmzt"] = lmzt_index;
    param["dlbzx"] = dlbzx_index;
    param["map"] = map_index;

    var json = JSON.stringify(param);

    $.ajax({
        type: 'get',
        url: server_ip+'api/wxym_num',
        dataType: 'json',
        data: json,
        success: function(data) {
            console.log(data)
            sources[0].src = "mp4/000"+data[0]+".mp4";
        },
        error: function(error) {
            console.log(error);
        }
    })

    // sources[0].src = "mp4/000"+mytime+".mp4";
    
    myVideo.load();
}

function playPause()
{ 
    var myVideo=document.getElementById("video1"); 
	if (myVideo.paused) 
	  myVideo.play(); 
	else 
	  myVideo.pause(); 
} 
</script>

<script type="text/javascript">
    $('.ui.dropdown').dropdown();
</script>

<script>
    function getVinList(){
        $.ajax({
            
            url: server_ip+'api/current_vin', //请求的url
            type: 'get', //请求的方式
            error: function (data) {
                console.log('getVinList请求失败');
            },
            success: function (data) {

                console.log('getVinList请求成功');
                console.log(data);

                var obj = document.getElementById("vin_menu");

                for(var i = 0; i < data.length; ++i){
                    var new_tex = document.createElement("div");
                    new_tex.setAttribute("class", "item");
                    new_tex.setAttribute("style", "font-size: 20px;");
                    new_tex.setAttribute("onclick", "onClickMenu(this)");
                    new_tex.innerHTML = data[i];
                    obj.appendChild(new_tex);
                }
            }
        });

    }
</script>
<script>
    $(function () {
$(".ul-item").hide();
$(".li-item").hover(function () {
$(this).find(".ul-item").stop(true,true).slideDown();
}, function () {
$(this).find(".ul-item").stop(true, true).slideUp();
});

$(".ul-item li a").hover(function () {
$(this).addClass("bg");
}, function () {
$(this).removeClass("bg");
});

//总结stop（）
//$("#box").stop();//默认的
//$("#box").stop(true);//暂停
//$("#box").stop(true, true);//立马停止
</script>
<script>
    getVinList();

    setTimeout(function(){
        backgroundRequest();
    }, 1000);

    // dashboard
    requestTotalCarNum();
    setTimeout(function(){
        requestOnCarNum();
    }, 100);

    // scoreboard
    requestAverageSpeed();

</script>

<script>
    function add_warning(){
        $('#warning_button').prepend('<button id="warning_button_3" class="md-trigger" data-modal="modal-3">插入告警信息测试</button>')
        $('#main_body').prepend('<div class="md-modal md-effect-1" id="modal-3"><div class="md-content"><h3>插入告警信息测试</h3><div><p>车辆告警详情:</p><ul><li><strong>危险程度:</strong> 危险.</li><li><strong>位置:</strong> xxxx, xxxx.</li><li><strong>详情:</strong> xxxxxx.</li></ul><button class="md-close">关闭</button> <button onclick="removeButton(\'warning_button_3\')">处理完成</button></div></div></div>')
        // 新插入的弹出式窗口需要重新初始化
        re_init_pop_window()
    }

    setTimeout(function(){
        add_warning();
    }, 5000);
</script>